---
title: 8、数据类型转换
sidebarDepth: 0
---
[[toc]]
# 8、数据类型转换

## `把其他数据类型转换为number类型`
::: tip 其他类型转 number
什么情况下会把其他数据类型转换为`number`类型？
- 1、`isNaN、Number、parseInt、parseFloat`
- 2、在进行加减乘除数值运算的时候

*特殊：*
```js
null ->0
undefined->NaN
// 引用数据类型转换为数字：都为NaN，单个数值的数组或空数组除外
Number({}) // NaN
Number([]) // 0
Number('') // 0
Number([9]) // 9
Number(['19']) // 19
// 先通过toString方法将对象转化为字符串，之后再调用Number方法把字符串转化为数字
```
:::
### JS中的数学运算
::: tip +、-、*、/
除了加号，具有特殊性，其余的运算符都是数学运算，也就是遇到非数字类型的，会调用`Number`转换为`number`类型再运算
加法的特殊性：在遇到字符串的时候，`+` 不是数学运算，而是字符串拼接，只要不遇到字符串就是数学运算。字符串拼接：是把其他值转换为字符串再进行拼接

*提示* ：对于`Number、String、Boolean、Array、RegEx、Date、Function`原型上的`toString`方法都是把当前数据类型转换为字符串的类型（它们的作用仅仅是用来转换为字符串的）
:::
### 解析字符串和强制转换
::: tip 区别
解析字符串中的数字和将字符串强制类型转换为数字的返回结果都是数字。但解析和转换两者之间还是有明显的差别。
- 解析(`parseInt、parseFloat`)：允许字符串中含有非数字字符，解析按照从左到右，遇到非数字字符就停止。
- 转换(`Number`)：不允许出现非数字字符，否则返回`NaN`
:::
## `把其他数据类型转换为布尔类型`
::: tip 其他类型转 `boolean`
什么情况下会把其他数据类型转换为布尔类型？
- 1.`Boolean`、`!`、`!!`
- 2.在条件判断的时候，先转换为布尔类型，再验证是否成立

*提示*：只有`null，undifined，NaN，±0`，空字符串，会转化为`false`其他都转化为`true`
:::
## `比较运算符`
::: tip == 、===
 `==`操作符允许在相等比较中进行强制类型转换，而`===`不允许

在使用 `==` 进行比较的时候，如果左右两边数据类型不相同，浏览器会默认转换为相同的类型，然后再比较（`===`不会这样操作）
所有对象转化为布尔值都是`true`(包括空对象)高程三27，电子书45页，`null`不是对象数据类型的，所以转化为`false`

规范定义如下：
(1)、如果`Type(x)`是数字，`Type(y)`是字符串，则返回 `x == ToNumber(y)`的结果
 - 在比大小时，如果两个都是字符串，则按字母顺序比较大小。
 
(2)、如果`Type(x)`是布尔类型，则返回 `ToNumber(x) == y`的结果
(3)、如果`Type(x)`是对象，则返回 `ToPrimitive(x) == y`的结果

`ToPrimitive`：抽象操作会首先(通过调用内部的`[[DefaultValue]]`)检查该值是否有`valueOf()`方法，如果有且返回基本类型值，就使用该值进行强制类型转换。如果没有就使用`toString()`的返回值（如果存在）来进行强制类型转换。
如果`valueOf()`和`toSting()`都不返回基本类型值，会产生`TypeError`错误

比较规则如下：

- 1，数字 == 字符串	在比较相等性之前先将字符串转换为数字；(空字符串转化为0)
- 2，布尔 == xxx	只要有布尔就都转化为数字比较
- 3，xxx  == 对象	
    + 先将对象转化为字符串(调用内置类`Array、RegExp、Data、Math、Function`上的`toString`方法）然后遵循以下比较规则：
（如何验证对象和xxx比较是先把对象转化为字符串[12,14,15]=='12,14,15'）

*注意* ：`Object`上的 `toString` 方法不是转换为字符串的，而是检测数据类型的；
    + xxx为 字符串 时，用对象转化后的字符串与xxx比较；
    + xxx为 数字 时，把对象转化后的字符串再转化为数字后比较
    + xxx为 布尔值 时，把对象转化后的字符串再转化为数字，把布尔值也转化为数字再比较；
- 4，对象 == 对象	只有两个对象都指向同一个内存空间才返回true
- 5，`null`或者`undefined` 和其它任何值都不相等（两个等号也是）
- `null===null` //true
- `undefined===undefined` //true；
:::
